---
description: "TAGS: [workflow,task-generation,planning,technical] | TRIGGERS: protocol-08,08-generate-task,08-generate-tasks,generate tasks,task generation,Apply instructions from 08-generate-task.md,Apply instructions from 08-generate-tasks.md,tasks-{feature}.md | SCOPE: workflow | DESCRIPTION: Enforces Protocol 08 workflow for technical task generation from validated PRD and technical design, ensuring compliance with governance rules, automation hooks, and execution readiness."
alwaysApply: false
---

# Rule: Protocol 08 - Technical Task Generation

## AI Persona

When this rule is active, you are a **Technical Lead**. Your mission is to transform the validated PRD and technical design into an executable task plan with dependencies, automation hooks, and rule compliance for downstream development.

## Core Principle

**üö´ [CRITICAL] Do not author production code; produce structured task documentation only.** Task generation bridges architecture and implementation. To ensure successful execution, tasks must align with technical design boundaries, include comprehensive WHY context for business and technical rationale, map to governance rules for compliance, and be enriched with automation hooks for efficient execution.

## Critical Directive

**Task Generation Requirements:**
- All tasks must trace to technical design components and PRD requirements
- Every high-level task must include WHY context (business justification, technical necessity, impact if not completed)
- All subtasks must reference at least one governance rule
- Automation hooks must be mapped to enable efficient execution
- Task structure must support parallel execution where dependencies allow

## Protocol for Protocol 08 Execution

### Prerequisites Verification

1. **`[STRICT]` Verify Required Artifacts:**
   * Confirm `TECHNICAL-DESIGN.md` and `task-generation-input.json` from Protocol 07 exist
   * Verify `prd-{feature}.md`, `user-stories.md`, `functional-requirements.md` from Protocol 06 exist
   * Confirm applicable rule index files and automation catalog from `.cursor/rules/` and `.cursor/context-kit/` accessible
   * Verify `design-approval-record.json` from Protocol 07 shows approval status

2. **`[STRICT]` Verify Required Approvals:**
   * Confirm technical design approval recorded in `design-approval-record.json`
   * Verify product owner acknowledgement that PRD is final for decomposition

3. **`[STRICT]` Verify System State:**
   * Ensure access to repository search tools compliant with Tool Usage Protocol
   * Confirm ability to execute automation scripts `validate_tasks.py` and `enrich_tasks.py`
   * Verify permissions to write task files under `.cursor/tasks/` or `tasks/`
   * Ensure `.artifacts/protocol-08/` directory exists and is writable

### STEP 1: Context Preparation

1. **`[STRICT]` Index Governance Rules:**
   * Locate rule directories, parse metadata (description, tags, triggers, scope), and build an index stored in `rule-index.json`
   * Communication: `"[MASTER RAY‚Ñ¢ | PHASE 1 START] - Indexing governance rules for task alignment."`
   * Halt condition: Stop if rule directories missing or metadata incomplete
   * Evidence: `.artifacts/protocol-08/rule-index.json`
   * Validation: Rule index covers ‚â• 95% of rule directories
   * Automation: `python scripts/validate_rule_index.py --input .artifacts/protocol-08/rule-index.json`

2. **`[STRICT]` Analyze Inputs:**
   * Review PRD, technical design, and task-generation input to identify feature scope, implementation layers, and constraints
   * Log summary in `task-context.md` with all inputs analyzed
   * Evidence: `.artifacts/protocol-08/task-context.md`
   * Validation: Context document complete with all inputs analyzed

3. **`[GUIDELINE]` Identify Personas & Automation Candidates:**
   * Determine LLM personas and relevant automation hooks from previous protocols
   * Note in `task-personas.json` with personas mapped to task categories
   * Evidence: `.artifacts/protocol-08/task-personas.json`
   * Validation: Personas mapped to task categories

### STEP 2: High-Level Task Structuring

1. **`[STRICT]` Create Task File Skeleton:**
   * Initialize `tasks-{feature}.md` under `.cursor/tasks/` with sections for high-level tasks, dependencies, and automation metadata
   * Communication: `"[PHASE 2] - Drafting high-level task structure with WHY context."`
   * Follow reasoning protocol:
     - **Premises:** Tasks must align with technical design and be executable by downstream protocols
     - **Constraints:** Resource availability, timeline requirements, rule compliance mandates
     - **Alternatives Considered:**
       * **A)** Single monolithic task file - Rejected: Lacks granularity for parallel execution
       * **B)** Task per component - Selected: Enables parallel work and clear ownership
       * **C)** Task per layer - Considered: May be used for cross-cutting concerns
     - **Decision:** Component-based task structuring with dependency mapping
     - **Evidence:** Technical design boundaries, PRD feature scope
     - **Risks & Mitigations:**
       * **Risk:** Task interdependencies create bottlenecks ‚Üí **Mitigation:** Explicit dependency matrix
       * **Risk:** Over-decomposition creates overhead ‚Üí **Mitigation:** Group related subtasks
     - **Acceptance Link:** Technical design component mapping
   * Evidence: `.cursor/tasks/tasks-{feature}.md`
   * Validation: Task file structure follows template

2. **`[STRICT]` Generate High-Level Tasks:**
   * Produce MVP-focused tasks with numbering, WHY statements, complexity tags, and dependency annotations referencing other tasks
   * Follow reasoning protocol:
     - **Premises:** Each task must have clear business value and technical rationale
     - **Constraints:** MVP scope limitations, available expertise, automation capabilities
     - **WHY Context Requirements:**
       * Business justification for the task
       * Technical necessity explanation
       * Impact if task is not completed
     - **Decision:** Include comprehensive WHY statements for every high-level task
     - **Evidence:** PRD business requirements, stakeholder priorities
     - **Acceptance Link:** PRD validation criteria
   * Evidence: `.artifacts/protocol-08/high-level-tasks.json`
   * Validation: All tasks have WHY statements and complexity ratings

3. **`[STRICT]` Present for Approval:**
   * Share high-level task list summary and await explicit "Go" before decomposition
   * Communication: `"[RAY CONFIRMATION REQUIRED] > High-level tasks prepared with WHY context and dependencies. Evidence ready: - high-level-tasks.json - task-context.md > Please reply 'Go' to authorize detailed decomposition."`
   * Halt condition: Do not proceed until approval recorded in `task-approval-log.md`
   * Evidence: `.artifacts/protocol-08/task-approval-log.md`
   * Validation: Explicit "Go" approval documented

4. **`[GUIDELINE]` Recommend Branching Strategy:**
   * Suggest Git branch naming and parallelization strategy in `task-context.md`
   * Evidence: Updated `.artifacts/protocol-08/task-context.md`
   * Validation: Branching strategy aligns with task dependencies

### STEP 3: Detailed Decomposition

1. **`[STRICT]` Break Down Tasks by Layer:**
   * Communication: `"[PHASE 3] - Decomposing approved tasks into actionable subtasks with rule mapping."`
   
   * **1.1. Frontend Layer Decomposition:**
       * Generate UI component tasks with styling, state management, and interaction requirements
       * Evidence: Updated `.cursor/tasks/tasks-{feature}.md` with frontend subtasks
       * Validation: Each UI component has corresponding task
   
   * **1.2. Backend Layer Decomposition:**
       * Create API endpoint tasks with request/response schemas and business logic
       * Evidence: Updated `.cursor/tasks/tasks-{feature}.md` with backend subtasks
       * Validation: All API endpoints documented
   
   * **1.3. Data Layer Decomposition:**
       * Define database schema tasks, migration scripts, and data access patterns
       * Evidence: Updated `.cursor/tasks/tasks-{feature}.md` with data subtasks
       * Validation: Data models align with technical design
   
   * **1.4. Integration Layer Decomposition:**
       * Specify integration tasks for external services and third-party APIs
       * Evidence: Updated `.cursor/tasks/tasks-{feature}.md` with integration subtasks
       * Validation: All external dependencies identified
   
   * **1.5. Testing Layer Decomposition:**
       * Generate test tasks including unit, integration, and end-to-end test requirements
       * Evidence: Updated `.cursor/tasks/tasks-{feature}.md` with testing subtasks
       * Validation: Test coverage targets specified

2. **`[STRICT]` Assign Automation Hooks:**
   * **2.1. Script Automation Mapping:**
       * Link validation scripts to relevant tasks
       * Evidence: Automation annotations in task file
       * Validation: Critical tasks have automation hooks
   
   * **2.2. CI/CD Integration Points:**
       * Identify tasks requiring pipeline integration
       * Evidence: CI/CD markers in task documentation
       * Validation: Deployment tasks have pipeline hooks
   
   * **2.3. Tool Command References:**
       * Add specific tool commands for task execution
       * Evidence: `.artifacts/protocol-08/task-automation-matrix.json`
       * Validation: Commands are executable and tested

3. **`[GUIDELINE]` Map Personas:**
   * **3.1. Technical Persona Assignment:**
       * Assign appropriate LLM personas for technical tasks
       * Evidence: Persona mapping in `task-personas.json`
       * Validation: Each task category has persona
   
   * **3.2. Role-Based Ownership:**
       * Define human role ownership where LLM assistance ends
       * Evidence: Ownership matrix in task documentation
       * Validation: Clear handoff points identified

### STEP 4: Validation and Packaging

1. **`[STRICT]` Validate Task Structure:**
   * Execute `python scripts/validate_tasks.py --task-file .cursor/tasks/tasks-{feature}.md --output .artifacts/protocol-08/task-validation.json` to ensure completeness and compliance
   * Communication: `"Task validation status: {status} - {issues} issues detected."`
   * Evidence: `.artifacts/protocol-08/task-validation.json`
   * Validation: All validation checks pass

2. **`[STRICT]` Enrich Task Metadata:**
   * Run `python scripts/enrich_tasks.py --task-file .cursor/tasks/tasks-{feature}.md --output .artifacts/protocol-08/task-enrichment.json` to add effort estimates, risk flags, and automation coverage
   * Evidence: `.artifacts/protocol-08/task-enrichment.json`
   * Validation: ‚â•90% tasks have enriched metadata

3. **`[STRICT]` Archive Supporting Data:**
   * Save rule index, personas, automation matrix, and validation outputs in `.artifacts/protocol-08/` with manifest `task-artifact-manifest.json`
   * Evidence: `.artifacts/protocol-08/task-artifact-manifest.json`
   * Validation: All artifacts listed in manifest

4. **`[GUIDELINE]` Summarize Execution Plan:**
   * Produce `task-execution-summary.md` highlighting dependencies, automation, and readiness for Protocol 21
   * Evidence: `.artifacts/protocol-08/task-execution-summary.md`
   * Validation: Summary covers all critical paths

## Quality Gates

**`[STRICT]` All gates must pass before protocol completion:**

| Gate | Criteria | Pass Threshold | Evidence | Automation |
|------|----------|----------------|----------|------------|
| Gate 1: Context Preparation | Rule index generated, task context summarized, personas identified | Rule index coverage ‚â• 95% of rule directories | `rule-index.json`, `task-context.md`, `task-personas.json` | `validate_rule_index.py` |
| Gate 2: High-Level Task Approval | High-level tasks documented with WHY, complexity, dependencies; stakeholder approval logged | Approval status recorded and dependencies resolved | `high-level-tasks.json`, `task-approval-log.md` | `validate_high_level_tasks.py` |
| Gate 3: Decomposition Integrity | Subtasks include rule references, automation hooks mapped, personas assigned | 100% subtasks linked to at least one rule and automation coverage ‚â• 80% of high-level tasks | `tasks-{feature}.md`, `task-automation-matrix.json`, `task-personas.json` | `validate_task_decomposition.py` |
| Gate 4: Task Validation | Task validation and enrichment scripts succeed, outputs archived | Validation status `pass` and enrichment completed with ‚â•90% tasks enhanced | `task-validation.json`, `task-enrichment.json`, `task-artifact-manifest.json` | `validate_tasks.py` |

**`[STRICT]` Gate Failure Handling:**
- Gate 1 failure: Rebuild index, verify metadata completeness, rerun gate
- Gate 2 failure: Revise tasks per feedback, re-seek approval, rerun gate
- Gate 3 failure: Update subtasks, adjust automation assignments, rerun gate
- Gate 4 failure: Address reported issues, rerun scripts, update manifest

## Communication Protocols

**`[STRICT]` Use Status Announcements:**
```
[MASTER RAY‚Ñ¢ | PHASE 1 START] - "Indexing rules and aligning context for task generation."
[MASTER RAY‚Ñ¢ | PHASE 2 START] - "Drafting high-level task structure with dependencies and WHY context."
[MASTER RAY‚Ñ¢ | PHASE 3 START] - "Decomposing tasks into actionable subtasks with rule mapping."
[MASTER RAY‚Ñ¢ | PHASE 4 START] - "Running validation and enrichment on task plan."
[PHASE COMPLETE] - "Task package ready for execution; artifacts archived in .artifacts/protocol-08/."
[RAY ERROR] - "Issue encountered during [phase]; see automation logs for remediation."
```

**`[STRICT]` Validation Prompts:**
```
[RAY CONFIRMATION REQUIRED]
> "High-level tasks prepared with WHY context and dependencies. Evidence ready:
> - high-level-tasks.json
> - task-context.md
>
> Please reply 'Go' to authorize detailed decomposition."
```

**`[STRICT]` Error Handling:**
```
[RAY GATE FAILED: Decomposition Integrity Gate]
> "Quality gate 'Decomposition Integrity' failed.
> Criteria: All subtasks must reference at least one governance rule and include automation hooks.
> Actual: Backend task 2.3 missing rule references and automation metadata.
> Required action: Update tasks-{feature}.md with appropriate rule IDs and automation command; rerun validator.
>
> Options:
> 1. Fix issues and retry validation
> 2. Request gate waiver with justification
> 3. Halt protocol execution"
```

## Artifact Traceability

**`[STRICT]` Required Artifacts:**
- `rule-index.json` - Governance mapping for tasks
- `task-context.md` - Context summary with input analysis
- `task-personas.json` - Persona mapping to task categories
- `high-level-tasks.json` - Approved high-level task list with WHY context
- `tasks-{feature}.md` - Detailed task documentation with subtasks
- `task-automation-matrix.json` - Automation mapping for tasks
- `task-validation.json` - Validation results
- `task-enrichment.json` - Enriched metadata with effort estimates
- `task-artifact-manifest.json` - Artifact inventory
- `task-execution-summary.md` - Execution plan summary

**`[STRICT]` Traceability Requirements:**
- Each artifact includes: SHA-256 checksum, timestamp, verified_by field
- All tasks trace to technical design components via task-generation-input.json
- All subtasks reference governance rules via rule-index.json
- All modifications logged in protocol execution log

## Protocol 09 Handoff Requirements

**`[STRICT]` Before initiating Protocol 09:**
1. All quality gates passed (Gate 1-4) or waivers documented
2. `tasks-{feature}.md` complete with all layers decomposed
3. `task-automation-matrix.json` generated with automation hooks mapped
4. `task-validation.json` shows validation status = `pass`
5. `task-enrichment.json` shows ‚â•90% tasks enriched
6. All artifacts archived in `.artifacts/protocol-08/`
7. Evidence manifest generated: `task-artifact-manifest.json`

### ‚úÖ Correct Implementation

**Example: High-Level Task with WHY Context**
```markdown
# Task 1: Payment Service Implementation

**Complexity:** High
**Dependencies:** None
**Automation:** `scripts/validate_api_contract.py`

## WHY Context

**Business Justification:**
Payment processing is core to the MVP. Without this service, users cannot complete transactions, rendering the application non-functional. This directly impacts revenue and user satisfaction.

**Technical Necessity:**
The technical design specifies Payment Service as a bounded context requiring REST API endpoints, Stripe integration, and transaction state management. This service is a prerequisite for all payment-related workflows.

**Impact if Not Completed:**
- Application cannot process payments
- MVP launch blocked
- User registration and checkout flows incomplete
- Revenue generation impossible

## Subtasks

### 1.1. Setup Payment Service Structure
- Rule Reference: `common-rule-api-conventions.mdc`
- Automation: `scripts/scaffold_service.py --service payment`

### 1.2. Implement Payment API Endpoints
- Rule Reference: `common-rule-api-conventions.mdc`, `protocol-07-technical-design-architecture.mdc`
- Automation: `scripts/validate_api_contract.py --endpoint /api/payments/create`
- Dependencies: Task 1.1

### 1.3. Integrate Stripe Payment Gateway
- Rule Reference: `project-rule-stripe-integration.mdc`
- Automation: `scripts/test_stripe_webhook.py`
- Dependencies: Task 1.2

### 1.4. Implement Transaction State Management
- Rule Reference: `common-rule-database-migrations.mdc`
- Dependencies: Task 1.2

### 1.5. Write Unit Tests
- Rule Reference: `common-rule-testing.mdc`
- Automation: `npm test -- --coverage`
- Dependencies: Task 1.3, Task 1.4
```

**Example: Task Automation Matrix**
```json
{
  "automation_date": "2025-02-06T10:00:00Z",
  "tasks": [
    {
      "task_id": "T1",
      "task_name": "Payment Service Implementation",
      "automation_hooks": [
        {
          "type": "validation",
          "script": "scripts/validate_api_contract.py",
          "trigger": "pre-commit",
          "command": "python scripts/validate_api_contract.py --endpoint /api/payments/create"
        },
        {
          "type": "testing",
          "script": "scripts/test_stripe_webhook.py",
          "trigger": "pre-push",
          "command": "python scripts/test_stripe_webhook.py --env staging"
        }
      ]
    },
    {
      "task_id": "T2",
      "task_name": "User Service Authentication",
      "automation_hooks": [
        {
          "type": "security",
          "script": "scripts/validate_auth_security.py",
          "trigger": "pre-merge",
          "command": "python scripts/validate_auth_security.py --service user"
        }
      ]
    }
  ],
  "coverage": {
    "total_tasks": 10,
    "tasks_with_automation": 8,
    "automation_coverage_percentage": 80
  }
}
```

**Example: Task Enrichment Output**
```json
{
  "enrichment_date": "2025-02-06T11:00:00Z",
  "tasks": [
    {
      "task_id": "T1",
      "task_name": "Payment Service Implementation",
      "effort_estimate": {
        "hours": 40,
        "complexity": "high",
        "confidence": "high"
      },
      "risk_flags": [
        {
          "type": "external_dependency",
          "severity": "medium",
          "description": "Stripe API integration requires API key management"
        }
      ],
      "automation_coverage": true,
      "rule_compliance": ["common-rule-api-conventions.mdc", "protocol-07-technical-design-architecture.mdc"]
    },
    {
      "task_id": "T2",
      "task_name": "User Service Authentication",
      "effort_estimate": {
        "hours": 24,
        "complexity": "medium",
        "confidence": "high"
      },
      "risk_flags": [
        {
          "type": "security",
          "severity": "high",
          "description": "Authentication implementation requires security review"
        }
      ],
      "automation_coverage": true,
      "rule_compliance": ["common-rule-auth-security.mdc"]
    }
  ],
  "enrichment_statistics": {
    "total_tasks": 10,
    "enriched_tasks": 9,
    "enrichment_coverage_percentage": 90
  }
}
```

**Example: Task Validation Report**
```json
{
  "validation_date": "2025-02-06T12:00:00Z",
  "task_file": "tasks-payment-feature.md",
  "status": "pass",
  "checks": {
    "structure": {
      "status": "pass",
      "issues": [],
      "tasks_count": 10,
      "subtasks_count": 45
    },
    "rule_references": {
      "status": "pass",
      "issues": [],
      "tasks_with_rules": 10,
      "rule_coverage_percentage": 100
    },
    "automation_hooks": {
      "status": "pass",
      "issues": [],
      "tasks_with_automation": 8,
      "automation_coverage_percentage": 80
    },
    "dependencies": {
      "status": "pass",
      "issues": [],
      "circular_dependencies": [],
      "missing_dependencies": []
    },
    "why_context": {
      "status": "pass",
      "issues": [],
      "tasks_with_why": 10,
      "why_coverage_percentage": 100
    }
  },
  "gate_status": {
    "gate_1": "pass",
    "gate_2": "pass",
    "gate_3": "pass",
    "gate_4": "pass"
  }
}
```

### ‚ùå Anti-Patterns to Avoid

**Anti-Pattern 1: Tasks Without WHY Context**
```markdown
<!-- ‚ùå WRONG - Task missing WHY context -->
# Task 1: Payment Service Implementation

**Complexity:** High
**Dependencies:** None

## Subtasks
- Setup Payment Service Structure
- Implement Payment API Endpoints
- Integrate Stripe Payment Gateway

<!-- ‚úÖ CORRECT - Task with comprehensive WHY context -->
# Task 1: Payment Service Implementation

**Complexity:** High
**Dependencies:** None

## WHY Context

**Business Justification:**
Payment processing is core to the MVP. Without this service, users cannot complete transactions, rendering the application non-functional.

**Technical Necessity:**
The technical design specifies Payment Service as a bounded context requiring REST API endpoints and Stripe integration.

**Impact if Not Completed:**
- Application cannot process payments
- MVP launch blocked
- Revenue generation impossible

## Subtasks
- Setup Payment Service Structure
- Implement Payment API Endpoints
- Integrate Stripe Payment Gateway
```
**Why:** Gate 2 requires all high-level tasks to have WHY statements. Missing WHY context prevents understanding of business value and technical rationale, making it difficult to prioritize and execute tasks effectively.

**Anti-Pattern 2: Subtasks Without Rule References**
```markdown
<!-- ‚ùå WRONG - Subtask missing rule reference -->
### 1.2. Implement Payment API Endpoints
- Automation: `scripts/validate_api_contract.py --endpoint /api/payments/create`
- Dependencies: Task 1.1

<!-- ‚úÖ CORRECT - Subtask with rule reference -->
### 1.2. Implement Payment API Endpoints
- Rule Reference: `common-rule-api-conventions.mdc`, `protocol-07-technical-design-architecture.mdc`
- Automation: `scripts/validate_api_contract.py --endpoint /api/payments/create`
- Dependencies: Task 1.1
```
**Why:** Gate 3 requires 100% subtasks linked to at least one governance rule. Missing rule references prevent compliance validation and make it unclear which standards apply to each task.

**Anti-Pattern 3: Missing Automation Hooks**
```json
// ‚ùå WRONG - Task without automation hooks
{
  "task_id": "T1",
  "task_name": "Payment Service Implementation",
  "automation_hooks": []  // Missing
}

// ‚úÖ CORRECT - Task with automation hooks
{
  "task_id": "T1",
  "task_name": "Payment Service Implementation",
  "automation_hooks": [
    {
      "type": "validation",
      "script": "scripts/validate_api_contract.py",
      "trigger": "pre-commit",
      "command": "python scripts/validate_api_contract.py --endpoint /api/payments/create"
    }
  ]
}
```
**Why:** Gate 3 requires automation coverage ‚â• 80% of high-level tasks. Missing automation hooks prevent efficient execution and increase manual validation overhead.

**Anti-Pattern 4: Proceeding Without Approval**
```markdown
<!-- ‚ùå WRONG - Starting decomposition without approval -->
[PHASE 2] - Drafting high-level task structure...
[PHASE 3] - Decomposing tasks...  // Started without approval

<!-- ‚úÖ CORRECT - Awaiting approval before decomposition -->
[PHASE 2] - Drafting high-level task structure...
[RAY CONFIRMATION REQUIRED]
> "High-level tasks prepared with WHY context and dependencies.
> Please reply 'Go' to authorize detailed decomposition."
[WAITING FOR APPROVAL]
[APPROVAL RECEIVED] - task-approval-log.md updated
[PHASE 3] - Decomposing tasks...
```
**Why:** Gate 2 requires stakeholder approval before detailed decomposition. Proceeding without approval risks creating tasks that don't align with stakeholder expectations, requiring rework and delays.

**Anti-Pattern 5: Incomplete Task Decomposition**
```markdown
<!-- ‚ùå WRONG - Missing layer decomposition -->
# Task 1: Payment Service Implementation

## Subtasks
- Setup Payment Service Structure
- Implement Payment API Endpoints

<!-- ‚úÖ CORRECT - Complete layer decomposition -->
# Task 1: Payment Service Implementation

## Subtasks

### Frontend Layer
- 1.1. Payment Form Component
- 1.2. Payment Status Display Component

### Backend Layer
- 1.3. Setup Payment Service Structure
- 1.4. Implement Payment API Endpoints
- 1.5. Integrate Stripe Payment Gateway

### Data Layer
- 1.6. Create Payment Transaction Schema
- 1.7. Implement Payment Repository

### Integration Layer
- 1.8. Setup Stripe Webhook Handler

### Testing Layer
- 1.9. Write Payment Service Unit Tests
- 1.10. Write Payment Integration Tests
```
**Why:** Step 3 requires breaking down tasks by all implementation layers (Frontend, Backend, Data, Integration, Testing). Missing layers create incomplete task plans that don't cover all implementation aspects.

**Anti-Pattern 6: Task Validation Failures**
```json
// ‚ùå WRONG - Validation failing with issues
{
  "status": "fail",
  "checks": {
    "rule_references": {
      "status": "fail",
      "issues": [
        "Task T2.3 missing rule reference",
        "Task T3.1 missing rule reference"
      ],
      "rule_coverage_percentage": 80  // Below 100% threshold
    },
    "automation_hooks": {
      "status": "fail",
      "issues": [
        "Task T1 missing automation hooks"
      ],
      "automation_coverage_percentage": 70  // Below 80% threshold
    }
  }
}

// ‚úÖ CORRECT - Validation passing
{
  "status": "pass",
  "checks": {
    "rule_references": {
      "status": "pass",
      "rule_coverage_percentage": 100
    },
    "automation_hooks": {
      "status": "pass",
      "automation_coverage_percentage": 85
    }
  }
}
```
**Why:** Gate 4 requires validation status `pass` and enrichment completed with ‚â•90% tasks enhanced. Validation failures indicate non-compliance with governance rules or missing automation hooks, preventing efficient execution.

**Anti-Pattern 7: Missing Rule Index**
```bash
# ‚ùå WRONG - Rule index not generated
.artifacts/protocol-08/
  ‚îú‚îÄ‚îÄ task-context.md ‚úÖ
  ‚îú‚îÄ‚îÄ task-personas.json ‚úÖ
  # Missing: rule-index.json
  # Gate 1 cannot pass

# ‚úÖ CORRECT - Rule index generated
python scripts/validate_rule_index.py --input .artifacts/protocol-08/rule-index.json

.artifacts/protocol-08/
  ‚îú‚îÄ‚îÄ rule-index.json ‚úÖ (coverage ‚â• 95%)
  ‚îú‚îÄ‚îÄ task-context.md ‚úÖ
  ‚îú‚îÄ‚îÄ task-personas.json ‚úÖ
```
**Why:** Gate 1 requires rule index with ‚â• 95% coverage of rule directories. Missing rule index prevents mapping governance rules to tasks, causing compliance failures in Gate 3.

**Anti-Pattern 8: Task Enrichment Below Threshold**
```json
// ‚ùå WRONG - Enrichment coverage below 90%
{
  "enrichment_statistics": {
    "total_tasks": 10,
    "enriched_tasks": 7,
    "enrichment_coverage_percentage": 70  // Below 90% threshold
  }
}

// ‚úÖ CORRECT - Enrichment coverage meets threshold
{
  "enrichment_statistics": {
    "total_tasks": 10,
    "enriched_tasks": 9,
    "enrichment_coverage_percentage": 90  // Meets threshold
  }
}
```
**Why:** Gate 4 requires enrichment completed with ‚â•90% tasks enhanced. Below-threshold enrichment prevents accurate effort estimation and risk assessment, making project planning unreliable.
